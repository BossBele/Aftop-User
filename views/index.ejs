<!DOCTYPE html>
<html>
  <head>
    <title>AfTop - Movies and TV Series</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <!-- jquery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <!-- UIkit CSS -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.2.0/css/uikit.min.css"
    />
    <!-- UIkit JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.2.0/js/uikit.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/uikit/3.2.0/js/uikit-icons.min.js"></script>
    <!-- fonts -->
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Reenie+Beanie"
    />
    <!-- jQuery throttle-debounce -->
    <script
      src="https://cdn.jsdelivr.net/gh/cowboy/jquery-throttle-debounce/jquery.ba-throttle-debounce.js"
      defer
    ></script>
    <!-- sanitize.css https://unpkg.com/sanitize.css -->
    <link
      href="https://cdn.jsdelivr.net/gh/csstools/sanitize.css@latest/sanitize.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/css/main.css" />
    <!-- modenizr -->
    <script src="/js/modenizr.js"></script>
    <!-- numeral.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/numeral.js/2.0.6/numeral.min.js"></script>
    <!-- money.js -->
    <script src="https://cdn.jsdelivr.net/gh/openexchangerates/money.js@latest/money.min.js"></script>
    <style></style>
  </head>

  <body class="uk-container-large uk-margin-auto uk-position-relative">
    <header
      uk-sticky="animation: uk-animation-slide-top; sel-target: .uk-navbar-container; cls-active: uk-box-shadow-small bg-white; cls-inactive: uk-navbar-transparent uk-position-top-left uk-position-z-index; top: section"
    >
      <div class="uk-navbar-container">
        <nav class="uk-navbar uk-width-1-1" uk-navbar="mode: click">
          <div class="uk-navbar-left">
            <ul class="uk-navbar-nav uk-text-bold">
              <li class="uk-active">
                <a href="/"
                  ><img
                    style="height: 65px; border: 1px solid #e0e0e0;"
                    class="uk-border-circle"
                    src="/media/logo.png"
                /></a>
              </li>
              <li>
                <a href="/">Home</a>
              </li>
              <li>
                <a
                  href="#toggle-animation"
                  uk-toggle="target: #toggle-animation; animation: uk-animation-fade"
                  >Categories</a
                >
              </li>
            </ul>
          </div>
          <div class="uk-navbar-right">
            <ul class="uk-navbar-nav uk-text-bold">
              <li>
                <button
                  class="uk-margin-small-right"
                  type="button"
                  uk-icon="icon: user; ratio: 1.5"
                  uk-toggle="target: #offcanvas-slide"
                ></button>
              </li>
              <li class="">
                <div
                  id="offcanvas-slide"
                  class=""
                  uk-offcanvas="overlay: true; flip: true;"
                >
                  <div class="uk-offcanvas-bar uk-flex uk-flex-column">
                    <button
                      class="uk-offcanvas-close uk-close-large"
                      type="button"
                      uk-close
                    ></button>
                    <ul
                      class="uk-nav uk-nav-primary uk-nav-center uk-margin-auto-vertical uk-padding uk-text-left"
                    >
                      <li class="">
                        <a href="#"><small>Movies</small></a>
                      </li>
                      <li class="">
                        <a href="#"><small>Series</small></a>
                      </li>
                      <li class="">
                        <a href="#"><small>My Subscriptions</small></a>
                      </li>
                      <li class="">
                        <a href="#"><small>Share</small></a>
                      </li>
                      <li class="">
                        <a href="#"><small>Feedback</small></a>
                      </li>
                      <li class="">
                        <a href="#"><small>Terms &amp; Policies</small></a>
                      </li>
                      <li class="">
                        <a href="#"><small>Sign Out</small></a>
                      </li>
                    </ul>
                  </div>
                </div>
              </li>
            </ul>
          </div>
        </nav>
        <div
          id="toggle-animation"
          class=""
          style="border-top: 1px solid #e0e0e0;"
          hidden
        >
          <div class="uk-container">
            <div class="uk-tile uk-padding-small">
              <div class="uk-position-relative" uk-slider="finite: true">
                <div
                  class="uk-position-relative uk-slider-container uk-visible-toggle"
                  tabindex="-1"
                >
                  <ul class="uk-slider-items uk-grid-small uk-grid">
                    <li>
                      <a href="/category/latest">
                        <button
                          class="uk-button uk-button-default uk-border-rounded"
                        >
                          Latest
                        </button>
                      </a>
                    </li>
                    <li>
                      <a href="/category/action">
                        <button
                          class="uk-button uk-button-default uk-border-rounded"
                        >
                          Action
                          <span class="uk-badge" style="vertical-align: unset;"
                            ><small><%= movies_action_videos %></small></span
                          >
                        </button>
                      </a>
                    </li>
                    <li>
                      <a href="/category/animation">
                        <button
                          class="uk-button uk-button-default uk-border-rounded"
                        >
                          Animation
                          <span class="uk-badge" style="vertical-align: unset;"
                            ><small><%= movies_horror_videos %></small></span
                          >
                        </button>
                      </a>
                    </li>
                    <li>
                      <a href="/category/comedy">
                        <button
                          class="uk-button uk-button-default uk-border-rounded"
                        >
                          Comedy
                          <span class="uk-badge" style="vertical-align: unset;"
                            ><small><%= movies_max_like %></small></span
                          >
                        </button>
                      </a>
                    </li>
                    <li>
                      <a href="/category/crime">
                        <button
                          class="uk-button uk-button-default uk-border-rounded"
                        >
                          Crime
                          <span class="uk-badge" style="vertical-align: unset;"
                            ><small><%= horror %></small></span
                          >
                        </button>
                      </a>
                    </li>
                    <li>
                      <a href="/category/drama">
                        <button
                          class="uk-button uk-button-default uk-border-rounded"
                        >
                          Drama
                          <span class="uk-badge" style="vertical-align: unset;"
                            ><small><%= drama %></small></span
                          >
                        </button>
                      </a>
                    </li>
                    <li>
                      <a href="/category/historical">
                        <button
                          class="uk-button uk-button-default uk-border-rounded"
                        >
                          Historical
                          <span class="uk-badge" style="vertical-align: unset;"
                            ><small><%= historical %></small></span
                          >
                        </button>
                      </a>
                    </li>
                    <li>
                      <a href="/category/fantasy">
                        <button
                          class="uk-button uk-button-default uk-border-rounded"
                        >
                          Fantasy
                          <span class="uk-badge" style="vertical-align: unset;"
                            ><small><%= fantasy %></small></span
                          >
                        </button>
                      </a>
                    </li>
                    <li>
                      <a href="/category/horror">
                        <button
                          class="uk-button uk-button-default uk-border-rounded"
                        >
                          Horror
                          <span class="uk-badge" style="vertical-align: unset;"
                            ><small><%= horror %></small></span
                          >
                        </button>
                      </a>
                    </li>
                    <li>
                      <a href="/category/romance">
                        <button
                          class="uk-button uk-button-default uk-border-rounded"
                        >
                          Romance
                          <span class="uk-badge" style="vertical-align: unset;"
                            ><small><%= romance %></small></span
                          >
                        </button>
                      </a>
                    </li>
                    <!-- <li>
                    <a href="/category/science Fiction">
                      <button class="uk-button uk-button-default uk-border-rounded">
                        Science Fiction
                        <span class="uk-badge" style="vertical-align: unset;"><small>0</small></span>
                      </button>
                    </a>
                  </li> -->
                    <li>
                      <a href="/category/thriller">
                        <button
                          class="uk-button uk-button-default uk-border-rounded"
                        >
                          Thriller
                          <span class="uk-badge" style="vertical-align: unset;"
                            ><small><%= thriller %></small></span
                          >
                        </button>
                      </a>
                    </li>
                    <li>
                      <a href="/category/western">
                        <button
                          class="uk-button uk-button-default uk-border-rounded"
                        >
                          Western
                          <span class="uk-badge" style="vertical-align: unset;"
                            ><small><%= western %></small></span
                          >
                        </button>
                      </a>
                    </li>
                  </ul>
                </div>
                <a
                  class="uk-position-center-left-out uk-position-small uk-hidden-hover"
                  href="#"
                  uk-slidenav-previous
                  uk-slider-item="previous"
                ></a>
                <a
                  class="uk-position-center-right-out uk-position-small uk-hidden-hover"
                  href="#"
                  uk-slidenav-next
                  uk-slider-item="next"
                ></a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </header>
    <main id="content">
      <!-- <section style="height:80px"></section> -->
      <section class="uk-cover-container uk-height-large uk-width-1-1">
        <div
          class="uk-position-relative uk-cover-container uk-height-1-1 uk-visible-toggle uk-light"
          tabindex="-1"
          uk-slideshow="autoplay: true;"
        >
          <ul class="uk-slideshow-items">
            <li>
              <img src="/media/photo.jpg" alt="" uk-cover />
              <div class="uk-position-center-right uk-margin-medium-right">
                <a
                  href="/view"
                  class="uk-button uk-button-primary uk-border-rounded"
                  >Watch Movie</a
                >
              </div>
            </li>
            <li>
              <img src="/media/dark.jpg" alt="" uk-cover />
              <div class="uk-position-center-right uk-margin-medium-right">
                <a
                  href="/view"
                  class="uk-button uk-button-primary uk-border-rounded"
                  >Watch Movie</a
                >
              </div>
            </li>
            <li>
              <img src="/media/light.jpg" alt="" uk-cover />
              <div class="uk-position-center-right uk-margin-medium-right">
                <a
                  href="/view"
                  class="uk-button uk-button-primary uk-border-rounded"
                  >Watch Movie</a
                >
              </div>
            </li>
          </ul>
          <a
            class="uk-position-center-left uk-position-small uk-hidden-hover"
            href="#"
            uk-slidenav-previous
            uk-slideshow-item="previous"
          ></a>
          <a
            class="uk-position-center-right uk-position-small uk-hidden-hover"
            href="#"
            uk-slidenav-next
            uk-slideshow-item="next"
          ></a>
        </div>
      </section>
      <section
        class="uk-section-small uk-section-default uk-container uk-padding-remove-bottom"
      >
        <div class="uk-container-small uk-margin-auto">
          <small class="">Sponsored</small>
        </div>
        <div class="uk-container-small uk-margin-auto">
          <div
            class="uk-cover-container uk-height-small uk-border-rounded uk-visible-toggle uk-light"
            tabindex="-1"
            uk-slideshow="autoplay: true; max-height: 300; animation: fade"
          >
            <ul class="uk-slideshow-items">
              <% adverts.forEach(function(video){ %>
              <li>
                <img
                src="https://firebasestorage.googleapis.com/v0/b/flix-10157.appspot.com/o/adverts%2F<%= video.file_name %>?alt=media&token=<%= video.tokens %>"
                alt="" uk-cover />
              </li>
              <% }) %>
            </ul>
            <a
              class="uk-position-center-left uk-position-small uk-hidden-hover"
              href="#"
              uk-slidenav-previous
              uk-slideshow-item="previous"
            ></a>
            <a
              class="uk-position-center-right uk-position-small uk-hidden-hover"
              href="#"
              uk-slidenav-next
              uk-slideshow-item="next"
            ></a>
          </div>
        </div>
      </section>
      <section class="uk-section uk-section-default">
        <div class="uk-container uk-position-relative">
          <div>
            <h4 class="uk-h4 uk-text-bold">Latest Movies</h4>
          </div>
          <div
            class="uk-position-relative uk-visible-toggle uk-dark uk-container uk-width-1-1"
            uk-slider="finite: true;"
          >
            <div
              class="uk-position-relative uk-visible-toggle uk-dark uk-container uk-width-1-1"
              tabindex="-1"
            >
              <div class="uk-slider-container uk-background-default">
                <ul class="uk-slider-items uk-grid-small uk-margin" uk-grid>
                  <% movies_videos.forEach(function(video){ %>
                  <li>
                    <a href="/view/<%= video.video_id %>/<%= video.genre %>">
                      <div
                        class="uk-card uk-card-default uk-border-rounded uk-card-hover"
                      >
                        <div
                          class="uk-cover-container uk-border-top-rounded slider-movie-art"
                        >
                          <img
                            class=""
                            src="https://firebasestorage.googleapis.com/v0/b/flix-10157.appspot.com/o/covers%2F<%= video.file_name %>?alt=media&token=<%= video.tokens %>"
                            uk-cover
                          />
                        </div>
                        <div class="uk-padding-small">
                          <h6 class="uk-h6 uk-margin-remove uk-text-center">
                            <%= video.name %>
                          </h6>
                        </div>
                      </div>
                    </a>
                  </li>
                  <% }) %>
                </ul>
              </div>
              <a
                class="uk-position-center-left uk-visible@s"
                href="#"
                uk-slidenav-previous
                uk-slider-item="previous"
              ></a>
              <a
                class="uk-position-center-right uk-visible@s"
                href="#"
                uk-slidenav-next
                uk-slider-item="next"
              ></a>
            </div>
          </div>
        </div>
      </section>
      <section class="uk-section uk-section-default">
        <div class="uk-container uk-position-relative">
          <div>
            <h4 class="uk-h4 uk-text-bold">Latest Series</h4>
          </div>
          <div
            class="uk-position-relative uk-visible-toggle uk-dark uk-container uk-width-1-1"
            uk-slider="finite: true;"
          >
            <div
              class="uk-position-relative uk-visible-toggle uk-dark uk-container uk-width-1-1"
              tabindex="-1"
            >
              <div class="uk-slider-container uk-background-default">
                <ul class="uk-slider-items uk-grid-small uk-margin" uk-grid>
                  <% series_videos.forEach(function(video){ %>
                  <li>
                    <a href="/view/<%= video.series_id %>/<%= video.genre %>">
                      <div
                        class="uk-card uk-card-default uk-border-rounded uk-card-hover"
                      >
                        <div
                          class="uk-cover-container uk-border-top-rounded slider-movie-art"
                        >
                          <img
                            class=""
                            src="https://firebasestorage.googleapis.com/v0/b/flix-10157.appspot.com/o/covers%2F<%= video.file_name %>?alt=media&token=<%= video.tokens %>"
                            uk-cover
                          />
                        </div>
                        <div class="uk-padding-small">
                          <h6 class="uk-h6 uk-margin-remove uk-text-center">
                            <%= video.name %>
                          </h6>
                        </div>
                      </div>
                    </a>
                  </li>
                  <% }) %>
                </ul>
              </div>
              <a
                class="uk-position-center-left uk-visible@s"
                href="#"
                uk-slidenav-previous
                uk-slider-item="previous"
              ></a>
              <a
                class="uk-position-center-right uk-visible@s"
                href="#"
                uk-slidenav-next
                uk-slider-item="next"
              ></a>
            </div>
          </div>
        </div>
      </section>
      <section class="uk-section">
        <div class="uk-container">
          <div class="uk-child-width-1-2@s" uk-grid>
            <div class="align-self-center pb-6 pb-md-8">
              <h3 class="uk-h3">Available on Android</h3>
              <p>
                As absolute is by amounted repeated entirely ye returned. These
                ready timed enjoy might sir yet one since. Years drift never if
                could forty being no. On estimable dependent as suffering on my.
              </p>
              <div class="">
                <a href="#"
                  ><img
                    style="height: 80px;"
                    src="media/badge-google-en.svg"
                    alt="download on google play"
                /></a>
              </div>
            </div>
            <div class="align-self-end uk-text-center">
              <img src="media/phone.png" data-aos="slide-up" />
            </div>
          </div>
        </div>
      </section>
    </main>
    <%- include('partials/footer.ejs') %>
    <div id="signin-modal" class="uk-flex-top" uk-modal>
      <div
        class="uk-modal-dialog uk-modal-body uk-margin-auto-vertical uk-border-rounded"
      >
        <button class="uk-modal-close-default" type="button" uk-close></button>
        <div>
          <form id="signin_form">
            <legend class="uk-legend">Sign In</legend>
            <div class="uk-margin">
              <input
                class="uk-input"
                required
                type="text"
                id="email"
                placeholder="Email"
              />
            </div>
            <div class="uk-margin">
              <input
                class="uk-input"
                required
                type="password"
                id="password"
                placeholder="Password"
              />
            </div>
            <div class="uk-margin uk-text-right">
              <button
                type="submit"
                class="uk-button uk-button-default uk-border-rounded"
              >
                Sign In
              </button>
            </div>
          </form>
          <p class="uk-text-center">
            Don't have an account?
            <span class="uk-text-primary" uk-toggle="target: #signup-modal">
              <a class="uk-link-reset">Sign Up</a>
            </span>
          </p>
        </div>
      </div>
    </div>
    <div id="signup-modal" class="uk-flex-top" uk-modal>
      <div
        class="uk-modal-dialog uk-modal-body uk-margin-auto-vertical uk-border-rounded"
      >
        <button class="uk-modal-close-default" type="button" uk-close></button>
        <div>
          <form id="signup_form">
            <legend class="uk-legend">Sign Up</legend>
            <div class="uk-margin">
              <input
                class="uk-input"
                type="text"
                id="email_s"
                placeholder="Email"
              />
            </div>
            <div class="uk-margin">
              <input
                class="uk-input"
                type="password"
                id="password_s"
                placeholder="New Password"
              />
            </div>
            <div class="uk-margin uk-text-right">
              <button
                type="submit"
                class="uk-button uk-button-default uk-border-rounded"
              >
                Sign Up
              </button>
            </div>
          </form>
          <p class="uk-text-center">
            Have an account?
            <span class="uk-text-primary" uk-toggle="target: #signin-modal">
              <a class="uk-link-reset">Sign In</a>
            </span>
          </p>
        </div>
      </div>
    </div>
    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <!-- <script src="/__/firebase/7.14.6/firebase-app.js"></script> -->

    <!-- TODO: Add SDKs for Firebase products that you want to use
         https://firebase.google.com/docs/web/setup#available-libraries -->

    <!-- Initialize Firebase -->
    <!-- <script src="/__/firebase/init.js"></script> -->
    <script>
      $(document).ready(function () {});

      $("#signin_form").on("submit", function (e) {
        e.preventDefault();
        var password = document.getElementById("password").value;
        var email = document.getElementById("email").value;

        signin(password, email);
      });

      $("#signup_form").on("submit", function (e) {
        e.preventDefault();
        var password = document.getElementById("password_s").value;
        var email = document.getElementById("email_s").value;

        signup(password, email);
      });

      function signin(password, email) {
        fetch("/signin", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({
            user: {
              password: password,
              email: email,
            },
          }),
        })
          .then((response) => response.text())
          .then((response) => checkError(response));
      }

      function signup(password, email) {
        fetch("/signup", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({
            user: {
              password: password,
              email: email,
            },
          }),
        })
          .then((response) => response.text())
          .then((response) => checkError(response));
      }

      function checkError(response) {
        switch (response) {
          case "not signin":
            $("#toggle").click();
            break;
          case "Wrong password":
            alert("Wrong password.");
            break;
          case "no user":
            alert("User not registerd.");
            break;
          case "success":
            $("#signin-modal").hide();
            break;
          case "user created":
            alert("Welcome to Aftop.");
            $("#signup-modal").hide();
            break;
          case "user exists":
            alert("User exists.");
            break;
          case "user error":
            alert("Please try again later.");
            break;
          default:
        }
      }
    </script>
  </body>
</html>
